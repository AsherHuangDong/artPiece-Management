webpackJsonp([73],{cC7T:function(e,a){},g433:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=t("g1HI"),r={name:"staffManagementEdit",data:function(){return{listRole:[],loading:{handleSubmit:!1},formValidate:{nickName:"",mailbox:"",countryCode:"",mobile:"",roleId:"",password:""},ruleValidate:{nickName:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],mobile:[{required:!0,message:"The phone cannot be empty",trigger:"blur"}],mailbox:[{required:!0,message:"Mailbox cannot be empty",trigger:"blur"},{type:"email",message:"Incorrect email format",trigger:"blur"}],countryCode:[{required:!0,message:"Please select the city",trigger:"blur"}],password:[{required:!0,message:"Please select the city",trigger:"blur"}],roleId:[{required:!0,message:"Choose at least one role"}]}}},methods:{cancel:function(){this.$router.push("/staffManagement")},handleSubmit:function(e){var a=this;this.$refs[e].validate(function(e){if(e){a.loading.handleSubmit=!0,console.log(a.formValidate);var t=new FormData;t.append("mailbox",a.formValidate.mailbox),t.append("countryCode",a.formValidate.countryCode),t.append("mobile",a.formValidate.mobile),t.append("adminId",a.formValidate.adminId),a.$axios.post("/api/admin/repetitionEmail",t).then(function(e){if(console.log(e.data),1!==e.data.data.status)return Object(o.k)(),a.loading.handleSubmit=!1,null;a.$axios.post("/api/admin/repetitionMobile",t).then(function(e){if(console.log(e.data),1!==e.data.data.status)return Object(o.l)(),a.loading.handleSubmit=!1,null;a.updateAdmin()})})}else a.$Message.error("表单验证错误!")})},handleReset:function(e){this.$refs[e].resetFields()},updateAdmin:function(){var e=this,a=new FormData;for(var t in this.formValidate)a.append(t,this.formValidate[t]);this.$axios.post("/api/admin/updateAdmin",a).then(function(a){e.loading.handleSubmit=!1,console.log("/api/admin/updateAdmin",a.data),Object(o.d)(),e.$router.push("/staffManagement")})}},mounted:function(){var e=this;this.$axios.post("/api/role/listRole").then(function(a){console.log("/api/role/listRole",a.data),e.listRole=a.data.data}),this.formValidate=this.$route.params.param,this.formValidate.countryCode=this.$route.params.param.country_code,this.formValidate.nickName=this.$route.params.param.nick_name,this.formValidate.adminId=this.$route.params.param.admin_id,this.formValidate.roleId=this.$route.params.param.roleList[0].roleId}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("Row",[t("Col",{attrs:{span:"12",offset:"6"}},[t("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-position":"top"}},[t("FormItem",{attrs:{label:"员工昵称",prop:"nickName"}},[t("Input",{attrs:{placeholder:"请输入员工昵称"},model:{value:e.formValidate.nickName,callback:function(a){e.$set(e.formValidate,"nickName",a)},expression:"formValidate.nickName"}})],1),e._v(" "),t("FormItem",{attrs:{label:"手机国家编码",prop:"countryCode"}},[t("Select",{attrs:{placeholder:"请选择手机国家编码"},model:{value:e.formValidate.countryCode,callback:function(a){e.$set(e.formValidate,"countryCode",a)},expression:"formValidate.countryCode"}},[t("Option",{attrs:{value:"+86"}},[e._v("+86")])],1)],1),e._v(" "),t("FormItem",{attrs:{label:"手机号码",prop:"mobile"}},[t("Input",{attrs:{placeholder:"请输入手机号码"},model:{value:e.formValidate.mobile,callback:function(a){e.$set(e.formValidate,"mobile",a)},expression:"formValidate.mobile"}})],1),e._v(" "),t("FormItem",{attrs:{label:"邮箱",prop:"mailbox"}},[t("Input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.formValidate.mailbox,callback:function(a){e.$set(e.formValidate,"mailbox",a)},expression:"formValidate.mailbox"}})],1),e._v(" "),t("FormItem",{attrs:{label:"登录密码",prop:"password"}},[t("Input",{attrs:{placeholder:"请输入密码"},model:{value:e.formValidate.password,callback:function(a){e.$set(e.formValidate,"password",a)},expression:"formValidate.password"}})],1),e._v(" "),t("FormItem",{attrs:{label:"角色",prop:"roleId"}},[t("RadioGroup",{model:{value:e.formValidate.roleId,callback:function(a){e.$set(e.formValidate,"roleId",a)},expression:"formValidate.roleId"}},e._l(e.listRole,function(a){return t("Radio",{key:a.roleId,attrs:{label:a.roleId}},[t("span",[e._v(e._s(a.roleName))])])}),1)],1),e._v(" "),t("FormItem",[t("Col",{attrs:{span:"12",offset:"6"}},[t("Button",{staticStyle:{width:"100px"},attrs:{type:"primary",loading:e.loading.handleSubmit},on:{click:function(a){return e.handleSubmit("formValidate")}}},[e._v("保存")]),e._v(" "),t("Button",{staticStyle:{width:"100px","margin-left":"8px"},on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var l=t("C7Lr")(r,i,!1,function(e){t("cC7T")},"data-v-15a7b9ba",null);a.default=l.exports}});
//# sourceMappingURL=73.fc79e84d9cf1e5fd32ba.js.map