webpackJsonp([5],{"8PnH":function(t,e){},"pvM+":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("WHp7"),r=i("InnB"),o=i("g1HI"),l={components:{VueEditor:a.a},name:"auctionManagementAdd",data:function(){return{time1:"",time2:"",auctionList:[],formValidate:{eligibility:!1},ruleValidate:{auctionRules:[{required:!0,message:"The auctionRules cannot be empty",trigger:"blur"}],cancelAuctionRules:[{required:!0,message:"The cancelAuctionRules  cannot be empty",trigger:"blur"}],copyrightCode:[{required:!0,message:"The copyrightCode  cannot be empty",trigger:"blur"}],copyrightId:[{required:!0,message:"The copyrightId  cannot be empty",trigger:"blur"}],eligibility:[{required:!0,message:"The eligibility  cannot be empty",trigger:"blur"}],etime:[{required:!0,type:"date",message:"The etime  cannot be empty",trigger:"blur"}],freeHandlingFee:[{required:!0,message:"The freeHandlingFee  cannot be empty",trigger:"blur"}],handlingFee:[{required:!0,message:"The handlingFee  cannot be empty",trigger:"blur"}],issuanceTotalAmount:[{required:!0,message:"The issuanceTotalAmount  cannot be empty",trigger:"blur"}],minAuctionAmount:[{required:!0,message:"The minAuctionAmount  cannot be empty",trigger:"blur"}],minAuctionNumber:[{required:!0,message:"The minAuctionNumber  cannot be empty",trigger:"blur"}],priceAccuracy:[{required:!0,message:"The priceAccuracy  cannot be empty",trigger:"blur"}],startingPrice:[{required:!0,message:"The startingPrice  cannot be empty",trigger:"blur"}],stime:[{required:!0,type:"date",message:"The stime   cannot be empty",trigger:"blur"}]}}},methods:{handleImageAdded:function(t,e,i,a){var r=new FormData;r.append("image",t),this.$axios.post("/api/upload/image",r).then(function(t){var r=t.data.data[0];e.insertEmbed(i,"image",r),a()}).catch(function(t){console.log(t)})},cancel:function(){this.$router.push("/auctionManagement")},copyrightCodeChange:function(t){console.log(t)},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){t?e.saveCopyrightAuction():e.$Message.error("Fail!")})},saveCopyrightAuction:function(){var t=this;this.formValidate.stime=Object(r.b)(Number(this.formValidate.stime))+this.time1,this.formValidate.etime=Object(r.b)(Number(this.formValidate.etime))+this.time2,console.log(this.formValidate);var e=new FormData;for(var i in this.formValidate)e.append(i,this.formValidate[i]);e.delete("_index"),e.delete("_rowKey"),e.delete("startTime"),e.delete("mtime"),e.delete("endTime"),e.delete("auctionStatus"),e.delete("ctime"),e.delete("status"),e.delete("runStatus"),e.delete("copyrightName"),e.delete("countryName"),e.delete("copyrightAuctionDetails"),this.$axios.post("/api/copyrightAuction/updateCopyrightAuction",e).then(function(e){console.log("/api/copyrightAuction/updateCopyrightAuction",e.data),"成功"===e.data.msg&&(Object(o.d)(),t.$router.push("/auctionManagement"))})},getCopyright:function(){var t=this,e=this;this.$axios.get("/api/copyright/getCopyright").then(function(i){console.log(i.data),t.auctionList=i.data.data,t.auctionList.push({copyrightCode:e.$route.params.row.copyrightCode,copyrightId:e.$route.params.row.copyrightId}),console.log(t.auctionList),console.log(t.formValidate.copyrightId)})},checkBoxChange:function(){this.formValidate.eligibility=1===this.formValidate.eligibility?0:1},handle:function(){console.log(this.$route.params.row),this.formValidate=this.$route.params.row,this.auctionList=[{copyrightCode:this.$route.params.row.copyrightCode,copyrightId:this.$route.params.row.copyrightId}];var t=new Date(this.formValidate.endTime[0],this.formValidate.endTime[1]-1,this.formValidate.endTime[2]);console.log(t),this.formValidate.endTime[5]?this.time2=this.formValidate.endTime[3]+":"+this.formValidate.endTime[4]+":"+this.formValidate.endTime[5]:this.time2=this.formValidate.endTime[3]+":"+this.formValidate.endTime[4]+":0",this.formValidate.etime=t;var e=new Date(this.formValidate.startTime[0],this.formValidate.startTime[1]-1,this.formValidate.startTime[2]);console.log(t),this.formValidate.startTime[5]?this.time1=this.formValidate.startTime[3]+":"+this.formValidate.startTime[4]+":"+this.formValidate.startTime[5]:this.time1=this.formValidate.startTime[3]+":"+this.formValidate.startTime[4]+":0",this.formValidate.stime=e}},mounted:function(){this.handle(),this.getCopyright()}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Row",[i("Card",{attrs:{"dis-hover":""}},[i("Form",{ref:"formValidate",attrs:{"label-position":"right","label-width":250,model:t.formValidate}},[i("Row",{staticStyle:{"margin-top":"-10px"}},[i("Col",{staticStyle:{"line-height":"34px"},attrs:{span:"24"}},[i("div",{staticStyle:{display:"inline-block",height:"14px",border:"2px solid #515a6e","margin-right":"5px"}}),t._v(" "),i("span",{staticStyle:{"font-weight":"bold"}},[t._v("基本信息")])])],1),t._v(" "),i("Divider",{staticStyle:{margin:"10px 0"}}),t._v(" "),i("Row",[i("Col",{attrs:{span:"20",offset:"1"}},[i("FormItem",{attrs:{label:"拍卖版权代码：",prop:"copyrightCode"}},[i("Select",{staticStyle:{width:"40%","min-width":"300px"},attrs:{"label-in-value":""},model:{value:t.formValidate.copyrightId,callback:function(e){t.$set(t.formValidate,"copyrightId",e)},expression:"formValidate.copyrightId"}},t._l(t.auctionList,function(e,a){return i("Option",{key:a,attrs:{value:e.copyrightId}},[t._v(t._s(e.copyrightCode))])}),1)],1),t._v(" "),i("FormItem",{attrs:{label:"发行总量：",prop:"issuanceTotalAmount"}},[i("Input",{staticStyle:{width:"40%","min-width":"300px"},attrs:{type:"number"},model:{value:t.formValidate.issuanceTotalAmount,callback:function(e){t.$set(t.formValidate,"issuanceTotalAmount",e)},expression:"formValidate.issuanceTotalAmount"}})],1),t._v(" "),i("FormItem",{attrs:{label:"起拍价格：",prop:"startingPrice"}},[i("Input",{staticStyle:{width:"40%","min-width":"300px"},attrs:{type:"number"},model:{value:t.formValidate.startingPrice,callback:function(e){t.$set(t.formValidate,"startingPrice",e)},expression:"formValidate.startingPrice"}})],1),t._v(" "),i("FormItem",{attrs:{label:"开始时间：",prop:"stime"}},[i("DatePicker",{staticStyle:{width:"20%","min-width":"150px"},attrs:{value:t.formValidate.stime,type:"date",placeholder:"Select date"},model:{value:t.formValidate.stime,callback:function(e){t.$set(t.formValidate,"stime",e)},expression:"formValidate.stime"}}),t._v(" "),i("TimePicker",{staticStyle:{width:"20%","min-width":"150px"},attrs:{value:t.time1,type:"time",placeholder:"Select time"},model:{value:t.time1,callback:function(e){t.time1=e},expression:"time1"}})],1),t._v(" "),i("FormItem",{attrs:{label:"结束时间：",prop:"etime"}},[i("DatePicker",{staticStyle:{width:"20%","min-width":"150px"},attrs:{value:t.formValidate.etime,type:"date",placeholder:"Select date"},model:{value:t.formValidate.etime,callback:function(e){t.$set(t.formValidate,"etime",e)},expression:"formValidate.etime"}}),t._v(" "),i("TimePicker",{staticStyle:{width:"20%","min-width":"150px"},attrs:{value:t.time2,type:"time",placeholder:"Select time"},model:{value:t.time2,callback:function(e){t.time2=e},expression:"time2"}})],1)],1)],1),t._v(" "),i("br"),t._v(" "),i("br"),t._v(" "),i("Row",{staticStyle:{"margin-top":"-10px"}},[i("Col",{staticStyle:{"line-height":"34px"},attrs:{span:"24"}},[i("div",{staticStyle:{display:"inline-block",height:"14px",border:"2px solid #515a6e","margin-right":"5px"}}),t._v(" "),i("span",{staticStyle:{"font-weight":"bold"}},[t._v("拍卖参数")])])],1),t._v(" "),i("Divider",{staticStyle:{margin:"10px 0"}}),t._v(" "),i("Row",[i("Col",{attrs:{span:"20",offset:"1"}},[i("FormItem",{attrs:{label:"价格精度：",prop:"priceAccuracy"}},[i("Input",{staticStyle:{width:"40%","min-width":"300px"},attrs:{type:"number"},model:{value:t.formValidate.priceAccuracy,callback:function(e){t.$set(t.formValidate,"priceAccuracy",e)},expression:"formValidate.priceAccuracy"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("位小数")])])],1),t._v(" "),i("FormItem",{attrs:{label:"单笔交易最小拍卖金额：",prop:"minAuctionAmount"}},[i("Input",{staticStyle:{width:"40%","min-width":"300px"},attrs:{type:"number"},model:{value:t.formValidate.minAuctionAmount,callback:function(e){t.$set(t.formValidate,"minAuctionAmount",e)},expression:"formValidate.minAuctionAmount"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("AP")])])],1),t._v(" "),i("FormItem",{attrs:{label:"单笔交易最小拍卖数量：",prop:"minAuctionNumber"}},[i("Input",{staticStyle:{width:"40%","min-width":"300px"},attrs:{type:"number"},model:{value:t.formValidate.minAuctionNumber,callback:function(e){t.$set(t.formValidate,"minAuctionNumber",e)},expression:"formValidate.minAuctionNumber"}})],1),t._v(" "),i("FormItem",{attrs:{label:"手续费：",prop:"handlingFee"}},[i("Row",[i("Col",{attrs:{span:"4"}},[i("Input",{staticStyle:{width:"100px"},attrs:{type:"number"},model:{value:t.formValidate.handlingFee,callback:function(e){t.$set(t.formValidate,"handlingFee",e)},expression:"formValidate.handlingFee"}},[i("span",{staticStyle:{width:"40px"},attrs:{slot:"append"},slot:"append"},[t._v("AP")])])],1),t._v(" "),i("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}},[i("span",[t._v("+")])]),t._v(" "),i("Col",{attrs:{span:"4"}},[i("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"0",type:"number"},model:{value:t.formValidate.handlingFeePercent,callback:function(e){t.$set(t.formValidate,"handlingFeePercent",e)},expression:"formValidate.handlingFeePercent"}},[i("span",{attrs:{slot:"append"},slot:"append"},[t._v("%")])])],1)],1)],1),t._v(" "),i("FormItem",{attrs:{label:"免手续费次数：",prop:"freeHandlingFee"}},[i("Input",{staticStyle:{width:"40%","min-width":"300px"},attrs:{type:"number"},model:{value:t.formValidate.freeHandlingFee,callback:function(e){t.$set(t.formValidate,"freeHandlingFee",e)},expression:"formValidate.freeHandlingFee"}})],1)],1)],1),t._v(" "),i("br"),t._v(" "),i("br"),t._v(" "),i("Row",{staticStyle:{"margin-top":"-10px"}},[i("Col",{staticStyle:{"line-height":"34px"},attrs:{span:"24"}},[i("div",{staticStyle:{display:"inline-block",height:"14px",border:"2px solid #515a6e","margin-right":"5px"}}),t._v(" "),i("span",{staticStyle:{"font-weight":"bold"}},[t._v("其他设置")])])],1),t._v(" "),i("Divider",{staticStyle:{margin:"10px 0"}}),t._v(" "),i("Row",[i("Col",{attrs:{span:"20",offset:"1"}},[i("FormItem",{attrs:{label:"参加资格："}},[i("Checkbox",{on:{"on-change":t.checkBoxChange},model:{value:1===t.formValidate.eligibility,callback:function(e){t.$set(t.formValidate,"eligibility===1",e)},expression:"formValidate.eligibility===1"}},[t._v("完成KYC可参与")])],1),t._v(" "),i("FormItem",{attrs:{label:"拍卖结束前",prop:"canNotCancelTime"}},[i("Input",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{type:"number"},model:{value:t.formValidate.canNotCancelTime,callback:function(e){t.$set(t.formValidate,"canNotCancelTime",e)},expression:"formValidate.canNotCancelTime"}}),t._v("分钟不可撤单\n              ")],1),t._v(" "),i("FormItem",{attrs:{label:"拍卖结束前",prop:"sendEmailTime"}},[i("Input",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{type:"number"},model:{value:t.formValidate.sendEmailTime,callback:function(e){t.$set(t.formValidate,"sendEmailTime",e)},expression:"formValidate.sendEmailTime"}}),t._v("分钟向未成交用户发送短信/邮件提醒\n              ")],1),t._v(" "),i("FormItem",{attrs:{label:"拍卖规则",prop:"auctionRules"}},[i("VueEditor",{staticStyle:{width:"100%",height:"auto"},attrs:{useCustomImageHandler:""},on:{"image-added":t.handleImageAdded},model:{value:t.formValidate.auctionRules,callback:function(e){t.$set(t.formValidate,"auctionRules",e)},expression:"formValidate.auctionRules"}})],1),t._v(" "),i("FormItem",{attrs:{label:"取消拍卖规则",prop:"cancelAuctionRules"}},[i("VueEditor",{staticStyle:{width:"100%",height:"auto"},attrs:{useCustomImageHandler:""},on:{"image-added":t.handleImageAdded},model:{value:t.formValidate.cancelAuctionRules,callback:function(e){t.$set(t.formValidate,"cancelAuctionRules",e)},expression:"formValidate.cancelAuctionRules"}})],1)],1)],1),t._v(" "),i("Row",[i("Col",{attrs:{span:"12",offset:"7"}},[i("Button",{staticStyle:{"margin-right":"5px",width:"80px"},attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("保存")]),t._v(" "),i("Button",{staticStyle:{"margin-left":"5px",width:"80px"},attrs:{type:"default"},on:{click:t.cancel}},[t._v("取消")])],1)],1)],1),t._v(" "),i("br"),t._v(" "),i("br")],1)],1)],1)},staticRenderFns:[]};var s=i("C7Lr")(l,n,!1,function(t){i("8PnH")},"data-v-ff7ec94a",null);e.default=s.exports}});
//# sourceMappingURL=5.2dd088a5a69002aef152.js.map