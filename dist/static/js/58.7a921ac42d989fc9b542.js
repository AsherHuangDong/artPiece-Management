webpackJsonp([58],{aqxP:function(t,a){},xwx1:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={name:"rotationDiagramAdd",components:{VueEditor:e("WHp7").a},data:function(){return{lanList:[],formValidate:{id:"",languageList:[],title:"",detail:""},rules:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],languageList:[{required:!0,type:"array",min:1,message:"请选择语言",trigger:"change"}],detail:[{required:!0,message:"内容不能为空",trigger:"blur"}]}}},methods:{handleImageAdded:function(t,a,e,n){var i=new FormData;i.append("image",t),this.$axios.post("/api/upload/image",i).then(function(t){var i=t.data.data[0];a.insertEmbed(e,"image",i),n()}).catch(function(t){console.log(t)})},submit:function(t){var a=this,e=this,n=new FormData;this.$refs[t].validate(function(t){t&&(n.append("id",a.formValidate.id),n.append("announcementTittle",a.formValidate.title),n.append("announcementContent",a.formValidate.detail),n.append("languageId",a.formValidate.languageList),n.append("type",2),e.$axios.post("/api/announcement/editAnnouncement",n).then(function(t){e.$Message.success("编辑成功"),e.$router.go(-1)}))})},handleCancel:function(){this.$router.go(-1)},getLanguage:function(){var t=this;this.$axios.post("/api/language/getLanguage",{}).then(function(a){t.lanList=a.data.data})},getShowData:function(){var t=this,a=new FormData;a.append("id",this.formValidate.id),this.$axios.post("/api/announcement/getEditAnnouncement",a).then(function(a){t.formValidate.title=a.data.data.announcementTittle,t.formValidate.detail=a.data.data.announcementContent,t.formValidate.languageList=a.data.data.languages})}},mounted:function(){this.formValidate.id=this.$route.query.id,this.getLanguage(),this.getShowData()}},i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content"},[e("div",{staticClass:"centerBox"},[e("Form",{ref:"formValidate",staticStyle:{margin:"40px"},attrs:{"label-width":100,model:t.formValidate,rules:t.rules,"label-position":"left"}},[e("FormItem",{attrs:{label:t.$t("help.title"),prop:"title"}},[e("Input",{attrs:{type:"text"},model:{value:t.formValidate.title,callback:function(a){t.$set(t.formValidate,"title",a)},expression:"formValidate.title"}})],1),t._v(" "),e("FormItem",{attrs:{label:t.$t("help.lan"),prop:"languageList"}},[e("CheckboxGroup",{model:{value:t.formValidate.languageList,callback:function(a){t.$set(t.formValidate,"languageList",a)},expression:"formValidate.languageList"}},t._l(t.lanList,function(a){return e("Checkbox",{key:a.id,staticStyle:{"margin-right":"20px"},attrs:{label:a.id}},[t._v(t._s(a.language))])}),1)],1),t._v(" "),e("FormItem",{attrs:{label:t.$t("help.content"),prop:"detail"}},[e("VueEditor",{staticStyle:{width:"100%",height:"auto"},attrs:{useCustomImageHandler:""},on:{"image-added":t.handleImageAdded},model:{value:t.formValidate.detail,callback:function(a){t.$set(t.formValidate,"detail",a)},expression:"formValidate.detail"}})],1),t._v(" "),e("FormItem",[e("Button",{attrs:{type:"primary"},on:{click:function(a){return t.submit("formValidate")}}},[t._v(t._s(t.$t("button.save")))]),t._v(" "),e("Button",{staticStyle:{"margin-left":"40px"},on:{click:function(a){return t.handleCancel("formValidate")}}},[t._v(t._s(t.$t("button.cancel")))])],1)],1)],1)])},staticRenderFns:[]};var o=e("C7Lr")(n,i,!1,function(t){e("aqxP")},"data-v-40286582",null);a.default=o.exports}});
//# sourceMappingURL=58.7a921ac42d989fc9b542.js.map