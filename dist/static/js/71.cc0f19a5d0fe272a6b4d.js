webpackJsonp([71],{pt08:function(e,t){},vUX1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"rotationDiagramAdd",components:{VueEditor:n("WHp7").a},data:function(){var e=this;return{uploadList:[],lanList:[{id:"zh_CN",name:"简体中文"},{id:"el_GR",name:"繁体中文"},{id:"en_US",name:"English"},{id:"ko_KR",name:"한국어"},{id:"mn_MN",name:"日本語"}],news:{},rules:{newsTittle:[{required:!0,message:this.$t("news.titleRequire"),trigger:"blur"}],newsImgUrl:[{required:!0,validator:function(t,n,s){e.news.newsImgUrl?s():s(new Error(e.$t("upLoadImgMessage.require")))},trigger:"change"}],languageList:[{required:!0,type:"array",min:1,message:this.$t("news.lanRequire"),trigger:"change"}],newsContent:[{required:!0,message:this.$t("news.contentRequire"),trigger:"blur"}]}}},methods:{getLanguage:function(){var e=this;this.$axios.post("/api/language/getLanguage",{}).then(function(t){e.lanList=t.data.data})},handleImageAdded:function(e,t,n,s){var a=new FormData;a.append("image",e),this.$axios.post("/api/upload/image",a).then(function(e){var a=e.data[0];t.insertEmbed(n,"image",a),s()}).catch(function(e){console.log(e)})},success:function(e,t,n){console.log("response",t),this.news.newsImgUrl=e.data[0]},handleFormatError:function(e){this.$message.warning({title:this.$t("upLoadImgMessage.format")})},handleMaxSize:function(e){this.$Notice.warning({title:this.$t("upLoadImgMessage.size")})},submit:function(e){var t=this,n=new FormData;n.append("languageList",this.news.languageList),n.append("newsContent",this.news.newsContent),n.append("newsImgUrl",this.news.newsImgUrl),n.append("newsTittle",this.news.newsTittle),this.$refs[e].validate(function(e){e&&t.$axios.post("/api/news/addNews",n).then(function(e){t.$Message.success(t.$t("message.add")),t.$router.go(-1)})})},handleCancel:function(){this.$router.go(-1)}},mounted:function(){this.getLanguage()}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("div",{staticClass:"centerBox"},[n("Form",{ref:"news",staticStyle:{margin:"40px"},attrs:{"label-width":100,model:e.news,rules:e.rules,"label-position":"left"}},[n("FormItem",{attrs:{label:e.$t("news.title"),prop:"newsTittle"}},[n("Input",{attrs:{type:"text"},model:{value:e.news.newsTittle,callback:function(t){e.$set(e.news,"newsTittle",t)},expression:"news.newsTittle"}})],1),e._v(" "),n("FormItem",{attrs:{label:e.$t("news.img"),prop:"newsImgUrl"}},[n("Upload",{attrs:{"on-success":e.success,action:"/api/upload/image","max-size":5120,format:["jpg","jpeg","png"],"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"show-upload-list":!1}},[n("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("请选择要上传的图片")]),e._v(" "),n("span",{staticStyle:{color:"#ff9900"}},[e._v("请支持JPG/JPEG/PNG格式，大小不要超过5M")])],1),e._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[n("img",{attrs:{src:e.news.newsImgUrl,alt:""}})])],1),e._v(" "),n("FormItem",{attrs:{label:e.$t("news.lan"),prop:"languageList"}},[n("CheckboxGroup",{model:{value:e.news.languageList,callback:function(t){e.$set(e.news,"languageList",t)},expression:"news.languageList"}},e._l(e.lanList,function(t){return n("Checkbox",{key:t.id,staticStyle:{"margin-right":"20px"},attrs:{label:t.id}},[e._v(e._s(t.language))])}),1)],1),e._v(" "),n("FormItem",{attrs:{label:e.$t("news.content"),prop:"newsContent"}},[n("VueEditor",{staticStyle:{width:"100%",height:"auto"},attrs:{useCustomImageHandler:""},on:{"image-added":e.handleImageAdded},model:{value:e.news.newsContent,callback:function(t){e.$set(e.news,"newsContent",t)},expression:"news.newsContent"}})],1),e._v(" "),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:function(t){return e.submit("news")}}},[e._v(e._s(e.$t("button.save")))]),e._v(" "),n("Button",{staticStyle:{"margin-left":"40px"},on:{click:function(t){return e.handleCancel("news")}}},[e._v(e._s(e.$t("button.cancel")))])],1)],1)],1)])},staticRenderFns:[]};var i=n("C7Lr")(s,a,!1,function(e){n("pt08")},"data-v-177c9fb8",null);t.default=i.exports}});
//# sourceMappingURL=71.cc0f19a5d0fe272a6b4d.js.map