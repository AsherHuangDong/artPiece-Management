webpackJsonp([49],{l4uR:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"rotationDiagramAdd",components:{VueEditor:a("WHp7").a},data:function(){return{lanList:[],formValidate:{id:"",languageList:[],title:"",detail:""},rules:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],languageList:[{required:!0,type:"array",min:1,message:"请选择语言",trigger:"change"}],detail:[{required:!0,message:"内容不能为空",trigger:"blur"}]}}},methods:{handleImageAdded:function(t,e,a,n){var i=new FormData;i.append("image",t),this.$axios.post("/api/upload/image",i).then(function(t){var i=t.data.data[0];e.insertEmbed(a,"image",i),n()}).catch(function(t){console.log(t)})},submit:function(t){var e=this,a=this,n=new FormData;this.$refs[t].validate(function(t){t&&(n.append("id",e.formValidate.id),n.append("announcementTittle",e.formValidate.title),n.append("announcementContent",e.formValidate.detail),n.append("languageId",e.formValidate.languageList),n.append("type",1),a.$axios.post("/api/announcement/editAnnouncement",n).then(function(t){a.$Message.success(a.$t("message.edit")),a.$router.go(-1)}))})},handleCancel:function(){this.$router.go(-1)},getLanguage:function(){var t=this;this.$axios.post("/api/language/getLanguage",{}).then(function(e){t.lanList=e.data.data})},getShowData:function(){var t=this,e=new FormData;e.append("id",this.formValidate.id),this.$axios.post("/api/announcement/getEditAnnouncement",e).then(function(e){t.formValidate.title=e.data.data.announcementTittle,t.formValidate.detail=e.data.data.announcementContent,t.formValidate.languageList=e.data.data.languages})}},mounted:function(){this.formValidate.id=this.$route.query.id,this.getLanguage(),this.getShowData()}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"centerBox"},[a("Form",{ref:"formValidate",staticStyle:{margin:"40px"},attrs:{"label-width":100,model:t.formValidate,rules:t.rules,"label-position":"left"}},[a("FormItem",{attrs:{label:t.$t("notice.title"),prop:"title"}},[a("Input",{attrs:{type:"text"},model:{value:t.formValidate.title,callback:function(e){t.$set(t.formValidate,"title",e)},expression:"formValidate.title"}})],1),t._v(" "),a("FormItem",{attrs:{label:t.$t("notice.lan"),prop:"languageList"}},[a("CheckboxGroup",{model:{value:t.formValidate.languageList,callback:function(e){t.$set(t.formValidate,"languageList",e)},expression:"formValidate.languageList"}},t._l(t.lanList,function(e){return a("Checkbox",{key:e.id,staticStyle:{"margin-right":"20px"},attrs:{label:e.id}},[t._v(t._s(e.language))])}),1)],1),t._v(" "),a("FormItem",{attrs:{label:t.$t("notice.content"),prop:"detail"}},[a("VueEditor",{staticStyle:{width:"100%",height:"auto"},attrs:{useCustomImageHandler:""},on:{"image-added":t.handleImageAdded},model:{value:t.formValidate.detail,callback:function(e){t.$set(t.formValidate,"detail",e)},expression:"formValidate.detail"}})],1),t._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.submit("formValidate")}}},[t._v(t._s(t.$t("button.save")))]),t._v(" "),a("Button",{staticStyle:{"margin-left":"40px"},on:{click:function(e){return t.handleCancel("formValidate")}}},[t._v(t._s(t.$t("button.cancel")))])],1)],1)],1)])},staticRenderFns:[]};var o=a("C7Lr")(n,i,!1,function(t){a("v21j")},"data-v-5493c255",null);e.default=o.exports},v21j:function(t,e){}});
//# sourceMappingURL=49.c4eb930c1c0ae47f82bb.js.map